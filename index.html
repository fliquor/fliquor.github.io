<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Labs 4 & 5: Interactive Visualization with D3.js</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <div class="container"> <!-- Centers content and sets max width -->
        <h1>United States Weather Data by Season during 2017</h1>

        <div class="controls">
            <button id="Winter" class="btn btn-outline-primary">Winter</button>
            <button id="Spring" class="btn btn-outline-success">Spring</button>
            <button id="Summer" class="btn btn-outline-warning">Summer</button>
            <button id="Fall" class="btn btn-outline-danger">Fall</button>
            
            Weather Data: <select id="colorVariable" class="variable"></select><br>
            <strong>Selected: Winter</strong>
        </div>


        <div id="vis"></div> <!--  Will hold our visualization (SVG) -->
    </div> 
    <div id="tooltip" style="display:none"></div> 
    
    <!-- Load D3.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/d3-simple-slider"></script>
    <script src="//d3js.org/topojson.v1.min.js"></script>
    <script src="js/script.js"></script>
    <script src="js/build_data.js"></script>
    <p>Introduction: 
    The data set we chose was the daily weather measurements in the U.S during the year 2016. The content is as the name says. 
    The data consists of measurements of the weather from several weather stations around the US. The subsets of data we chose to focus on were the average temperature, snowfall, precipitation, and wind speed. 
    We also decided to group the data by season.
    
    Rationale:
    We were inspired by the zipdecode website and wanted to do something with a similar visual. As such, we did not really have any alternative choices for how we wanted the data to be presented, 
    it was either we do the geographic visual or not. Luckily, all the data sets provided provided some sort of gateway for a geographic visual. Since we chose the weather data set, its type is spatial, 
    hence the visual of the US, of which is divided up into states each with its abbreviated label. To distinguish the values of a given metric, we obviously decided on color and saturation with a colorbar 
    at the bottom to aide the user in understanding what a given color and/or saturation means numerically. The colorbar itself has a scale labeling the values. For average temperature, we went with the 
    obvious red for hot and blue for cold. Snow and precipitation use the same blue scale (as percipitation is commonly associated with the color blue). Lastly, green was used for wind speed, as again, 
    green felt like a color that is commonly associated with green.
    
    For the most part, there were no alternative approaches aside from how to represent the wind metrics. A potential idea was to represent this data using a vector field, implying arrows with a length and 
    direction, but decided against it for the sake of simplicity and time. We also considered purple and shades of purple for representing snow fall but remained with blue since that was our preexisting 
    color attribution with snow.
    
    When determining how a user should interact with our visual, we started with what kind of story we wanted tell. For our visual, we want users to be able to derive their own hypotheses on the weather 
    patterns in 2017 in the US. To make the data more meaningful, we divided the data into four different subsets, the seasons, for each of the four metrics we chose to include. We thought averaging 
    across the entire year would be much too simple to have any sort of significant meaning. To view the data for an arbitrary season, we have color coded buttons with a color we attribute to the respective 
    season. For changing the metrics, we thought a simple drop down menu would suffice. A transition animation was included as an effort to showcase either the gradual or extreme change from one season to another. 
    Lastly, users can hover over a given state to view more detailed information about their chosen metric. The tooltip displays the full name of the state, how many weather stations there are, and the averaged 
    metric for that specific state for the chosen season.
    
    Development Process:
    We decided to split our work with each person focusing on one aspect of the visualization. This included the aesthetic components and the technical components. The aesthetic components includes aspects such 
    as the button and drop-down menu designs, color scale choices for the data, and the formatting/positioning of these elements. The technical component focused on data processing, such as computing the data 
    values for each state, filtering the data by by season, and linking the data to dynamically change the states' colors and tooltip information. Our development process focused on tacking major aspects of 
    visualization one at a time. So we started by focusing on creating the map and then linking the data to it, then moved onto creating the tooltips, then buttons and the drop-down menu, implementing the 
    functionality of each element (such as the tooltips updating information as you hover states or the drop down changing the data, colors, and colorbar as you change the data type) when creating each element. 
    We finished by adding the final elements which included the colorbar at the bottom and the text at the top that lets you know which season has been selected. For efficiency reasons, we also decided to create 
    modified version of the original dataset containing only the information necessary for the visualization. This then required us to slightly modified how the data was being processed to adapt to the new, 
    modified dataset. It took about 10 hours over the course of a week to complete all of the major elements of the visualization. The aspect that took the most time was probably setting up the actual map plot. 
    Besides having to figure out how to do it in the first place, We also needed to familiarize ourselves with formats such as GeoJson and TopoJson which were necessary to create the plot.
    
    References: 
    Data Source: https://fumeng-yang.github.io/CMSC471/handouts/weather.csv
    GeoJson Guide: https://www.youtube.com/watch?v=045-bsOsbJc
    Inspiration: https://benfry.com/zipdecode/ 
                 https://github.com/NelsonMinar/zipdecode-js
</p>
</body>
</html>
